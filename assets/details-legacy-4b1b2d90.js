!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(t,n,r){return(n=function(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,u,o=[],s=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);s=!0);}catch(c){l=!0,i=c}finally{try{if(!s&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./chakra-legacy-dae91ce7.js","./index-legacy-0d944a36.js","./react-legacy-57266490.js","./graph-legacy-2e8a5bac.js","./stations-legacy-287ae8fa.js","./change-types-legacy-ba4d0ee9.js","./clipboard-legacy-854ce55d.js","./misc-nodes-legacy-5636959a.js"],(function(e,t){"use strict";var a,u,o,s,l,c,d,f,p,h,g,m,b,y,v,x,j,w,A,N,S,E,O,C,k,W,z,P,T,R,D,I,_,M,U,F,L,q,V,$,B,G,H,J,K;return{setters:[function(e){a=e.j,u=e.$,o=e.a0,s=e.a1,l=e.s,c=e.A,d=e.M,f=e.m,p=e.n,h=e.p,g=e.r,m=e.q,b=e.ae},function(e){y=e.c,v=e.j,x=e.d,j=e.y,w=e.z,A=e.A,N=e.ak,S=e.T,E=e.O,O=e.ah,C=e.v,k=e.t,W=e.N,z=e.q,P=e.al,T=e.n,R=e.D,D=e.aj,I=e.am,_=e.an,M=e.ao,U=e.ap,F=e.p},function(e){L=e.b},function(e){q=e.b},function(e){V=e.s},function(e){$=e.d,B=e.e,G=e.f},function(e){H=e.u,J=e.e},function(e){K=e.m}],execute:function(){function t(){var e=y().t,t=v(),n=x((function(e){return e.runtime})),c=n.selected,d=n.theme,f=n.paletteAppClip.output,p=L.useCallback((function(){t(j()),t(w()),t(A(h.current.export()))}),[t,j,w,A]),h=L.useRef(window.graph),g=function(e){if(h.current.hasNode(e)){var t=h.current.getNodeAttributes(e),n=t.type;return e.startsWith("stn")?t[n].names.join("/"):n}if(h.current.hasEdge(e)){var r=i(h.current.extremities(e),2),a=r[0],u=r[1],o=h.current.getSourceAttributes(e),s=h.current.getTargetAttributes(e),l=o.type,c=s.type;return(a.startsWith("stn")?o[l].names[0]:l)+" - "+(u.startsWith("stn")?s[c].names[0]:c)}},m=i(L.useState(!1),2),b=m[0],k=m[1];return L.useEffect((function(){var e;b&&f&&(e=f,c.forEach((function(t){if(h.current.hasEdge(t)){var n=h.current.getEdgeAttributes(t).style,i=h.current.getEdgeAttribute(t,n);n!==C.River&&void 0!==i.color&&(i.color=e),h.current.mergeEdgeAttributes(t,r({},n,i))}else if(h.current.hasNode(t)){var a=h.current.getNodeAttributes(t).type,u=h.current.getNodeAttribute(t,a);void 0!==u.color&&(u.color=e),h.current.mergeNodeAttributes(t,r({},a,u))}})),p(),k(!1))}),[null==f?void 0:f.toString()]),a.jsxs(u,{children:[a.jsxs(o,{as:"h5",size:"sm",children:[e("panel.details.selected")," ",c.length]}),a.jsx(N,{label:e("panel.details.multipleChangeColor"),children:a.jsx(S,{theme:d,onClick:function(){k(!0),t(E(d))}})}),a.jsx(s,{m:"var(--chakra-space-1)",children:c.map((function(e){var n;return a.jsx(l,{width:"100%",size:"sm",variant:"solid",onClick:function(){return t(O([e]))},overflow:"hidden",maxW:"270",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"ruby",children:null===(n=g(e))||void 0===n?void 0:n.replaceAll("\\","⏎")},e)}))})]})}function Q(){var e=y().t,t=v(),n=L.useCallback((function(){t(w()),t(A(m.current.export()))}),[t,w,A]),r=x((function(e){return e.runtime})),u=r.selected,o=r.theme,s=u.at(0),m=L.useRef(window.graph),b=i(L.useState(!1),2),j=b[0],S=b[1],E=L.useRef(null),O=Object.fromEntries(Object.entries(k).map((function(t){var n=i(t,2),r=n[0],a=n[1];return[r,e(a.metadata.displayName).toString()]}))),T=i(L.useState(m.current.getEdgeAttribute(s,"type")),2),R=T[0],D=T[1],I=i(L.useState(void 0),2),_=I[0],M=I[1],U=Object.fromEntries(Object.entries(W).map((function(t){var n=i(t,2),r=n[0],a=n[1];return[r,e(a.metadata.displayName).toString()]}))),F=i(L.useState(m.current.getEdgeAttribute(s,"style")),2),q=F[0],V=F[1],G=i(L.useState(void 0),2),H=G[0],J=G[1],K=Object.values(z).filter((function(e){return!W[q].metadata.supportLinePathType.includes(e)})),Q=Object.values(C).filter((function(e){return!W[e].metadata.supportLinePathType.includes(R)})),X=function(e){e&&(_?(_&&($(m.current,s,_),D(m.current.getEdgeAttribute(s,"type")),n()),M(void 0)):H&&(H&&(B(m.current,s,H,o),V(m.current.getEdgeAttribute(s,"style")),n()),J(void 0))),S(!1)};return a.jsxs(a.Fragment,{children:[a.jsx(N,{label:e("panel.details.info.linePathType"),minW:"276",children:a.jsx(P,{options:O,disabledOptions:K,defaultValue:R,value:R,onChange:function(e){var t=e.target.value;M(t),S(!0)}})}),a.jsx(N,{label:e("panel.details.info.lineStyleType"),minW:"276",children:a.jsx(P,{options:U,disabledOptions:Q,defaultValue:q,value:q,onChange:function(e){var t=e.target.value;J(t),S(!0)}})}),a.jsx(c,{isOpen:j,leastDestructiveRef:E,onClose:function(){return X(!1)},children:a.jsx(d,{children:a.jsxs(f,{children:[a.jsx(p,{children:e("warning")}),a.jsx(h,{children:e("panel.details.changeLineTypeContent")}),a.jsxs(g,{children:[a.jsx(l,{ref:E,onClick:function(){return X(!1)},children:e("cancel")}),a.jsx(l,{ml:"2",colorScheme:"red",onClick:function(){return X(!0)},children:e("panel.details.changeType")})]})]})})})]})}function X(){var e=y().t,t=v(),n=L.useCallback((function(){t(j()),t(A(u.current.export()))}),[t,j,A]),r=x((function(e){return e.runtime})).selected.at(0),u=L.useRef(window.graph),o=i(L.useState(!1),2),s=o[0],m=o[1],b=L.useRef(null),w=i(L.useState(void 0),2),S=w[0],E=w[1],O=u.current.getNodeAttribute(r,"type"),C=Object.fromEntries(Object.entries(V).map((function(t){var n=i(t,2),r=n[0],a=n[1];return[r,e(a.metadata.displayName).toString()]}))),k=function(e){e&&S&&(G(u.current,r,S),n()),E(void 0),m(!1)};return a.jsxs(a.Fragment,{children:[a.jsx(N,{label:e("panel.details.info.stationType"),minW:"276",children:a.jsx(P,{options:C,disabledOptions:[O],value:O,onChange:function(e){var t=e.target.value;E(t),m(!0)}})}),a.jsx(c,{isOpen:s,leastDestructiveRef:b,onClose:function(){return k(!1)},children:a.jsx(d,{children:a.jsxs(f,{children:[a.jsx(p,{children:e("warning")}),a.jsx(h,{children:e("panel.details.changeStationTypeContent")}),a.jsxs(g,{children:[a.jsx(l,{ref:b,onClick:function(){return k(!1)},children:e("cancel")}),a.jsx(l,{ml:"2",colorScheme:"red",onClick:function(){return k(!0)},children:e("panel.details.changeType")})]})]})})})]})}function Y(){var e=y().t,n=v(),r=L.useCallback((function(){n(j()),n(w()),n(A(l.current.export()))}),[n,w,A]),i=x((function(e){return e.runtime})).selected,s=i.at(0),l=L.useRef(window.graph),c=[];return 0===i.length||(1===i.length?(c.push({type:"input",label:e("panel.details.info.id"),value:s,minW:276}),c.push({type:"select",label:e("panel.details.info.zIndex"),value:s?l.current.hasNode(s)?l.current.getNodeAttribute(s,"zIndex"):l.current.hasEdge(s)?l.current.getEdgeAttribute(s,"zIndex"):0:0,options:Object.fromEntries(Array.from({length:11},(function(e,t){return[t-5,(t-5).toString()]}))),onChange:function(e){return function(e){var t=Math.min(Math.max(e,-5),5);l.current.hasNode(s)&&l.current.setNodeAttribute(s,"zIndex",t),l.current.hasEdge(s)&&l.current.setEdgeAttribute(s,"zIndex",t),r()}(Number(e))}})):i.length>1&&c.push({type:"input",label:e("panel.details.info.type"),value:"multiple selection",minW:276})),a.jsxs(u,{p:1,children:[a.jsx(o,{as:"h5",size:"sm",children:e("panel.details.info.title")}),a.jsx(T,{fields:c,minW:130}),1===i.length&&s.startsWith("stn")&&l.current.hasNode(s)&&l.current.getNodeAttribute(s,"type")in V&&a.jsx(X,{}),1===i.length&&s.startsWith("line")&&l.current.hasEdge(s)&&l.current.getEdgeAttribute(s,"type")in k&&l.current.getEdgeAttribute(s,"style")in W&&a.jsx(Q,{}),i.length>1&&a.jsx(t,{})]})}function Z(){var e=y().t,t=v(),n=x((function(e){return e.runtime})).selected,r=n.at(0),s=L.useRef(window.graph),c=i(L.useState("undefined"),2),d=c[0],f=c[1],p=i(L.useState("undefined"),2),h=p[0],g=p[1],m=i(L.useState("undefined"),2),b=m[0],j=m[1],w=i(L.useState("undefined"),2),A=w[0],N=w[1];L.useEffect((function(){if(null!=r&&r.startsWith("line")){var e=i(s.current.extremities(r),2),t=e[0],n=e[1];if(f(t),g(n),t.startsWith("stn")){var a,u,o=s.current.getNodeAttribute(t,"type");j(null!==(a=null===(u=s.current.getNodeAttribute(t,o))||void 0===u?void 0:u.names.at(0))&&void 0!==a?a:"undefined")}if(n.startsWith("stn")){var l,c,d=s.current.getNodeAttribute(n,"type");N(null!==(l=null===(c=s.current.getNodeAttribute(n,d))||void 0===c?void 0:c.names.at(0))&&void 0!==l?l:"undefined")}}}),[n]);var S=H((function(){t(R()),t(D(d))})),E=H((function(){t(R()),t(D(h))})),O=[{type:"custom",label:e("panel.details.lineExtremities.source"),component:a.jsx(l,{flex:1,size:"sm",variant:"link",onClick:S,children:d}),minW:"full"},{type:"input",label:e("panel.details.lineExtremities.sourceName"),value:b,minW:"full"},{type:"custom",label:e("panel.details.lineExtremities.target"),component:a.jsx(l,{flex:1,size:"sm",variant:"link",onClick:E,children:h}),minW:"full"},{type:"input",label:e("panel.details.lineExtremities.targetName"),value:A,minW:"full"}];return a.jsxs(u,{p:1,children:[a.jsx(o,{as:"h5",size:"sm",children:e("panel.details.lineExtremities.title")}),a.jsx(T,{fields:O,minW:130})]})}function ee(){var e=y().t,t=v(),n=L.useCallback((function(){t(j()),t(w()),t(A(d.current.export()))}),[t,j,w,A]),r=x((function(e){return e.runtime})),s=r.selected,l=r.refresh.nodes,c=s.at(0),d=L.useRef(window.graph),f=i(L.useState({x:0,y:0}),2),p=f[0],h=f[1];L.useEffect((function(){if(null!=c&&c.startsWith("stn")||null!=c&&c.startsWith("misc_node_")){var e=d.current.getNodeAttribute(c,"x"),t=d.current.getNodeAttribute(c,"y");h({x:e,y:t})}}),[l,s]);var g=[{type:"input",label:e("panel.details.nodePosition.pos.x"),value:p.x.toString(),validator:function(e){return!Number.isNaN(e)},onChange:function(e){d.current.mergeNodeAttributes(c,{x:Number(e)}),n()}},{type:"input",label:e("panel.details.nodePosition.pos.y"),value:p.y.toString(),validator:function(e){return!Number.isNaN(e)},onChange:function(e){d.current.mergeNodeAttributes(c,{y:Number(e)}),n()}}];return a.jsxs(u,{p:1,children:[a.jsx(o,{as:"h5",size:"sm",children:e("panel.details.nodePosition.title")}),a.jsx(T,{fields:g,minW:130})]})}var te=n(n({},V),K),ne=function(){var e,t=v(),n=x((function(e){return e.runtime})).selected,i=y().t,u=n.at(0),o=window.graph.getNodeAttribute(u,"type"),s=o in te&&te[o].attrsComponent,l=null!==(e=window.graph.getNodeAttribute(u,o))&&void 0!==e?e:{};return s?a.jsx(s,{id:u,attrs:l,handleAttrsUpdate:function(e,n){var i=window.graph.getNodeAttribute(e,"type");window.graph.mergeNodeAttributes(e,r({},i,n)),t(j()),t(A(window.graph.export()))}}):a.jsx(m,{fontSize:"xs",m:"var(--chakra-space-1)",children:i("panel.details.unknown.error",{category:i("panel.details.unknown.node")})})},re=function(){var e,t,n=v(),i=x((function(e){return e.runtime})).selected,u=y().t,o=i.at(0),s=window.graph.getEdgeAttribute(o,"type"),l=null!==(e=window.graph.getEdgeAttribute(o,s))&&void 0!==e?e:{},c=s in k&&k[s].attrsComponent,d=window.graph.getEdgeAttribute(o,"style"),f=null!==(t=window.graph.getEdgeAttribute(o,d))&&void 0!==t?t:{},p=d in W&&W[d].attrsComponent;return a.jsxs(a.Fragment,{children:[c?a.jsx(c,{id:o,attrs:l,handleAttrsUpdate:function(e,t){window.graph.mergeEdgeAttributes(e,r({},s,t)),n(w()),n(A(window.graph.export()))}}):a.jsx(m,{fontSize:"xs",m:"var(--chakra-space-1)",children:u("panel.details.unknown.error",{category:u("panel.details.unknown.linePath")})}),p?a.jsx(p,{id:o,attrs:f,handleAttrsUpdate:function(e,t){window.graph.mergeEdgeAttributes(e,r({},d,t)),n(w()),n(A(window.graph.export()))}}):a.jsx(m,{fontSize:"xs",m:"var(--chakra-space-1)",children:u("panel.details.unknown.error",{category:u("panel.details.unknown.lineStyle")})})]})};e("default",(function(){var e=y().t,t=v(),n=L.useRef(window.graph),r=L.useCallback((function(){t(j()),t(w()),t(A(n.current.export()))}),[t,j,w,A]),i=x((function(e){return e.runtime})),s=i.selected,c=i.mode,d=s.at(0);return a.jsxs(I,{isOpen:s.length>0&&!c.startsWith("line"),width:300,header:"Dummy header",alwaysOverlay:!0,children:[a.jsx(_,{onClose:function(){return t(R())},children:e("panel.details.header")}),a.jsxs(M,{children:[a.jsx(Y,{}),1===s.length&&n.current.hasNode(d)&&a.jsx(ee,{}),1===s.length&&n.current.hasEdge(d)&&a.jsx(Z,{}),1===s.length&&a.jsxs(u,{p:1,children:[a.jsx(o,{as:"h5",size:"sm",children:e("panel.details.specificAttrsTitle")}),window.graph.hasNode(d)&&a.jsx(ne,{}),window.graph.hasEdge(d)&&a.jsx(re,{})]})]}),a.jsx(U,{children:a.jsxs(b,{children:[1===s.length&&n.current.hasNode(s.at(0))&&a.jsx(l,{size:"sm",variant:"outline",onClick:function(){return function(e){var r=structuredClone(n.current.getNodeAttributes(e));r.x+=50,r.y+=50;var i=e.startsWith("stn")?"stn_".concat(F(10)):"misc_node_".concat(F(10));n.current.addNode(i,r),t(j()),t(A(n.current.export()))}(s.at(0))},children:e("panel.details.footer.duplicate")}),a.jsx(l,{size:"sm",variant:"outline",onClick:function(){return function(e){var t=new Set(e),r=q(n.current,t),i=J(n.current,t,new Set(r));navigator.clipboard.writeText(i)}(s)},children:e("panel.details.footer.copy")}),a.jsx(l,{size:"sm",variant:"outline",onClick:function(){return e=s,t(R()),e.forEach((function(e){n.current.hasNode(e)?n.current.dropNode(e):n.current.hasEdge(e)&&n.current.dropEdge(e)})),void r();var e},children:e("panel.details.footer.remove")})]})})]})}))}}}))}();
